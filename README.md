# PII Detection Plugin for Dify

基于 Dify LLM 的个人身份识别信息（PII）检测插件。使用先进的AI技术检测、分析和脱敏文本中的敏感个人信息。

## 功能特性

### 🔍 PII 检测
- **智能检测**：使用 AI 识别多种类型的 PII 信息
- **支持类型**：姓名、邮箱、电话、身份证号、地址、银行账号等
- **置信度评分**：为每个检测结果提供准确性评分
- **风险评估**：自动评估检测到的 PII 信息风险等级

### 📊 深度分析
- **隐私风险评估**：评估 PII 信息可能带来的隐私风险
- **合规性分析**：分析是否涉及 GDPR、CCPA 等法规要求
- **数据敏感度分类**：对数据敏感度进行分级
- **修复建议**：提供具体的风险缓解建议

### 🎭 智能脱敏
- **多种策略**：支持部分遮蔽、完全遮蔽、合成数据替换
- **保持可读性**：在保护隐私的同时维持文本可用性
- **操作记录**：详细记录所有脱敏操作

## 支持的 PII 类型

| 类型 | 英文标识 | 示例 |
|------|----------|------|
| 姓名 | person_name | 张三、李明 |
| 电子邮件 | email | user@example.com |
| 电话号码 | phone | 13812345678 |
| 身份证号 | id_number | 110101199001011234 |
| 地址信息 | address | 北京市朝阳区xxx街道 |
| 银行账号 | bank_account | 6222021234567890123 |
| 信用卡号 | credit_card | 4111-1111-1111-1111 |
| 护照号码 | passport | G12345678 |
| 驾照号码 | driver_license | 110101123456 |
| 社会保障号 | social_security | 123-45-6789 |
| 出生日期 | date_of_birth | 1990年1月1日 |
| 组织名称 | organization | ABC公司 |

## 工具说明

### 1. PII Detection (pii_detect)
检测文本中的个人身份识别信息。

**参数：**
- `text` (必需)：待检测的文本内容
- `pii_categories` (可选)：指定检测的 PII 类别，用逗号分隔
- `model` (必需)：选择使用的 LLM 模型

**输出：**
- 检测结果 JSON，包含检测到的 PII 项目
- 风险等级评估
- 检测摘要

**示例：**
```
输入文本："我的名字是张三，电话是13812345678，邮箱是zhangsan@example.com"
输出：检测到3个PII项目，风险等级：medium
```

### 2. PII Analysis (pii_analyze)
对检测到的 PII 信息进行深度分析。

**参数：**
- `text` (必需)：原始文本
- `detection_result` (必需)：PII 检测结果的 JSON 字符串
- `model` (必需)：选择使用的 LLM 模型

**输出：**
- 隐私风险评估
- 合规性分析
- 数据敏感度分类
- 修复建议列表

### 3. PII Masking (pii_mask)
对文本中的 PII 信息进行脱敏处理。

**参数：**
- `text` (必需)：需要脱敏的文本
- `mask_strategy` (可选)：脱敏策略，可选值：
  - `partial`（默认）：部分遮蔽，保留部分字符
  - `full`：完全遮蔽，用星号替换
  - `replacement`：使用合成数据替换
- `model` (必需)：选择使用的 LLM 模型

**输出：**
- 脱敏后的文本
- 脱敏操作详情
- 脱敏操作摘要

**脱敏示例：**
```
原始：我的名字是张三，电话是13812345678
部分脱敏：我的名字是张*，电话是138****5678
完全脱敏：我的名字是***，电话是***********
```

## 使用场景

### 📋 数据合规检查
在处理用户数据前，检测其中的 PII 信息，确保符合数据保护法规要求。

### 🛡️ 隐私保护
在数据分享或发布前，识别并脱敏敏感个人信息，保护用户隐私。

### 📊 风险评估
评估数据处理活动中的隐私风险，制定相应的风险缓解措施。

### 🔄 数据处理流程
集成到数据处理工作流中，自动化地处理 PII 信息。

## 工作流集成

该插件特别适合在 Dify 工作流中使用：

1. **数据接收** → **PII检测** → **风险评估** → **自动处理决策**
2. **文档处理** → **PII分析** → **合规性检查** → **报告生成**
3. **数据发布准备** → **PII脱敏** → **质量检查** → **安全发布**

## 安装和使用

1. 将插件文件夹复制到 Dify 插件目录
2. 在 Dify 中启用插件
3. 在工作流或对话中使用相应的工具

## 注意事项

- 该插件使用 AI 技术进行检测，建议在关键场景下进行人工验证
- 检测结果的准确性取决于使用的 LLM 模型能力
- 脱敏操作不可逆，请在操作前备份重要数据
- 请确保遵循相关的数据保护法规和最佳实践

## 隐私保护

本插件在本地处理数据，不会将用户数据发送到外部服务器。所有 PII 检测和处理都在 Dify 环境内完成。

## 支持和反馈

如有问题或建议，请通过相关渠道联系开发团队。

---

**免责声明**：本插件提供的 PII 检测功能仅供参考，不能替代专业的数据保护咨询。用户应根据具体法律法规要求和业务场景，制定适当的数据保护策略。